import 'dart:math';
import 'package:nhagiare_mobile/features/domain/entities/posts/address.dart';
import '../../../domain/entities/posts/real_estate_post.dart';

class RealEstatePostModel extends RealEstatePostEntity {
  const RealEstatePostModel({
    String? id,
    String? userId,
    String? projectId,
    String? typeId,
    String? unitId,
    String? status,
    String? title,
    String? description,
    double? area,
    AddressEntity? address,
    Point? addressPoint,
    int? price,
    int? deposit,
    bool? isLease,
    DateTime? postedDate,
    DateTime? expiryDate,
    List<String>? images,
    List<String>? videos,
    bool? isProSeller,
    Map<String, dynamic>? features,
    bool? postApprovalPriority,
    bool? isActive,
    String? infoMessage,
    int? updateCount,
    int? priorityLevel,
  }) : super(
          id: id,
          userId: userId,
          projectId: projectId,
          typeId: typeId,
          unitId: unitId,
          status: status,
          title: title,
          description: description,
          area: area,
          address: address,
          addressPoint: addressPoint,
          price: price,
          deposit: deposit,
          isLease: isLease,
          postedDate: postedDate,
          expiryDate: expiryDate,
          images: images,
          videos: videos,
          isProSeller: isProSeller,
          features: features,
          postApprovalPriority: postApprovalPriority,
          isActive: isActive,
          infoMessage: infoMessage,
          updateCount: updateCount,
          priorityLevel: priorityLevel,
        );

  factory RealEstatePostModel.fromJson(Map<String, dynamic> json) {
    return RealEstatePostModel(
      id: json['id'],
      userId: json['user_id'],
      projectId: json['project_id'],
      typeId: json['type_id'],
      unitId: json['unit_id'],
      status: json['status'],
      title: json['title'],
      description: json['description'],
      area: json['area'],
      address: AddressEntity.fromJson(json['address']),
      addressPoint:
          Point(json['address_point']['x'], json['address_point']['y']),
      price: json['price'],
      deposit: json['deposit'],
      isLease: json['is_lease'],
      postedDate: DateTime.parse(json['posted_date']),
      expiryDate: DateTime.parse(json['expiry_date']),
      images: List<String>.from(json['images']),
      videos: List<String>.from(json['videos']),
      isProSeller: json['is_pro_seller'],
      features: json['features'],
      postApprovalPriority: json['post_approval_priority'],
      isActive: json['is_active'],
      infoMessage: json['info_message'],
      updateCount: json['update_count'],
      priorityLevel: json['priority_level'],
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'user_id': userId,
      'project_id': projectId,
      'type_id': typeId,
      'unit_id': unitId,
      'status': status,
      'title': title,
      'description': description,
      'area': area,
      'address': address?.toJson(),
      'address_point': {
        'x': addressPoint?.x,
        'y': addressPoint?.y,
      },
      'price': price,
      'deposit': deposit,
      'is_lease': isLease,
      'posted_date': postedDate!.toIso8601String(),
      'expiry_date': expiryDate!.toIso8601String(),
      'images': images,
      'videos': videos,
      'is_pro_seller': isProSeller,
      'features': features,
      'post_approval_priority': postApprovalPriority,
      'is_active': isActive,
      'info_message': infoMessage,
      'update_count': updateCount,
      'priority_level': priorityLevel,
    };
  }

  factory RealEstatePostModel.fromEntity(RealEstatePostEntity entity) {
    return RealEstatePostModel(
      id: entity.id,
      userId: entity.userId,
      projectId: entity.projectId,
      typeId: entity.typeId,
      unitId: entity.unitId,
      status: entity.status,
      title: entity.title,
      description: entity.description,
      area: entity.area,
      address: entity.address,
      addressPoint: entity.addressPoint,
      price: entity.price,
      deposit: entity.deposit,
      isLease: entity.isLease,
      postedDate: entity.postedDate,
      expiryDate: entity.expiryDate,
      images: entity.images,
      videos: entity.videos,
      isProSeller: entity.isProSeller,
      features: entity.features,
      postApprovalPriority: entity.postApprovalPriority,
      isActive: entity.isActive,
      infoMessage: entity.infoMessage,
      updateCount: entity.updateCount,
      priorityLevel: entity.priorityLevel,
    );
  }
}
